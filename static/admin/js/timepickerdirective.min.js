angular.module('myDirectiveModule',[])
	.directive('datepicker', DatePicker);

/* Directives */
function DatePicker(){
    return {
        require: 'ngModel',
        restrict: 'A',
        scope: { format: "=?" },
        link: function(scope, element, attrs, ngModel){
            if(typeof(scope.format) == "undefined"){ scope.format = "mm-dd-yyyy" }
            $(element).fdatepicker({format: scope.format}).on('changeDate', function(ev){
                scope.$apply(function(){
					//var formated_date = ev.date + "T00:00:00Z"
					//var formated_date = $filter('date')(new Date(ev.date), 'yyyymmdd');
                    ngModel.$setViewValue(ev.date);
                }); 
            })
        }
    } 
}